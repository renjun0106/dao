<?php include(MODULE.'/admin/public/pre.html');?>

<style type="text/css">
	#blog-content{
		min-height: 400px;
		height:auto;
	}
</style>

	<div class="page-title">
		
		<div class="title-env">
			<h1 class="title">Blog Publish</h1>
			<p class="description">Plain text boxes, select dropdowns and other basic form elements</p>
		</div>
			
	</div>
	<div class="row">
		<div class="col-sm-12">
			
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Default form inputs</h3>
					<div class="panel-options">
						<a href="#" data-toggle="panel">
							<span class="collapse-icon">&ndash;</span>
							<span class="expand-icon">+</span>
						</a>
					</div>
				</div>
				<div class="panel-body">
					
					<form role="form" class="form-horizontal" action="?action=save" method="post" id="form">
						
						<div class="form-group">
							<label class="col-sm-2 control-label">Title</label>
							
							<div class="col-sm-10">
								<input name="title" type="text" class="form-control" value="<?=$data['title']?>">
							</div>
						</div>
						
						<div class="form-group">
							<label class="col-sm-2 control-label">
								Content
							</label>
							
							<div class="col-sm-10">
								<a class="btn btn-white" href="javascript:;"><i class="fa-smile-o"></i></a>
								<a class="btn btn-white" href="javascript:;"><i class="fa-external-link"></i></a>
								<div class="form-control" id="blog-content" contenteditable="true">
									<?=$data['content']?>
								</div>
								<input type="hidden" name="content">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">Description</label>
							
							<div class="col-sm-10">
								<textarea name="description" class="form-control"><?=$data['description']?></textarea>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">Select Type</label>
							
							<script type="text/javascript">
								jQuery(document).ready(function($)
								{
									$("#s2-type").select2({
										placeholder: 'Select Type...',
										allowClear: true
									}).on('select2-open', function()
									{
										// Adding Custom Scrollbar
										$(this).data('select2').results.addClass('overflow-hidden').perfectScrollbar();
									});
									
								});
							</script>
							
							<div class="col-sm-10">
								<select class="form-control" id="s2-type" name="type">
									<option></option>
									<?php foreach ($base_data['type'] as $k=>$ts) :?>
										<optgroup label="<?=$k?>">
											<?php foreach ($ts as $k=>$t) :?>
												<option value="<?=$k?>" <?php if($data['type']==$k):?>selected<?php endif;?>><?=$t?></option>
											<?php endforeach;?>
										</optgroup>
									<?php endforeach;?>
								</select>
							</div>
										
						</div>
								
						<div class="form-group">
							<label class="col-sm-2 control-label">Select Tags</label>
								
							<script type="text/javascript">
								jQuery(document).ready(function($)
								{
									$("#s2-tags").select2({
										placeholder: 'Choose Tags...',
										allowClear: true
									}).on('select2-open', function()
									{
										// Adding Custom Scrollbar
										$(this).data('select2').results.addClass('overflow-hidden').perfectScrollbar();
									});
									
								});
							</script>
							
							<div class="col-sm-10">
								<select class="col-sm-10 form-control" id="s2-tags" name="tags[]" multiple>
								<option></option>
									<?php $tagsarr=explode(',', $data['tags']);?>
									<?php foreach ($base_data['tags'] as $k=>$ts) :?>
										<optgroup label="<?=$k?>">
											<?php foreach ($ts as $k=>$t) :?>
												<option value="<?=$k?>" <?php if(in_array($k, $tagsarr)):?>selected<?php endif;?>><?=$t?></option>
											<?php endforeach;?>
										</optgroup>
									<?php endforeach;?>
								</select>
							</div>
								
						</div>
						
						<div class="form-group-separator"></div>

						<div class="form-group pull-right">
							<input type="hidden" name="table" value="blog">
							<input type="hidden" name="id" value="<?=$data['id']?>">
							<input type="hidden" name="user_id" value="<?=$data['user_id']?>">
							<input type="hidden" name="modify_time" value="<?=date('Y-m-d')?>">
							<button type="submit" class="btn btn-success">Submit</button>
							<button type="reset" class="btn btn-white">Reset</button>
						</div>
						
					</form>
					
				</div>
			</div>
			
		</div>
	</div>


			

<?php include(MODULE.'/admin/public/post.html');?>

	<!-- Imported scripts on this page -->
	<style type="text/css">
		<?php include(MODULE.'/admin/assets/js/select2/select2.css');?>
		<?php include(MODULE.'/admin/assets/js/select2/select2-bootstrap.css');?>
		<?php include(MODULE.'/admin/assets/js/multiselect/css/multi-select.css');?>
	</style>
	<script type="text/javascript">
		<?php include(MODULE.'/admin/assets/js/select2/select2.min.js');?>
		<?php include(MODULE.'/admin/assets/js/multiselect/js/jquery.multi-select.js');?>

		$('#form').submit(function(){
			$('input[name="content"]',this).val($('#blog-content').html());
		});
	</script>

<?php include(MODULE.'/admin/public/end.html');?>